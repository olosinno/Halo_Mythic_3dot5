<!-- character information grid ________________________________________________ -->

<div class="sheet-header_logo">

  <!-- first column of grid: left-side fields' labels/names -->
  <div class="sheet-gs1">Character Name</div>
  <div class="sheet-gs2">Faction</div>
  <div class="sheet-gs3">Soldier Type</div>
  <div class="sheet-gs4">Rank</div>
  <div class="sheet-gs5">Build / Size</div>
  <div class="sheet-gs6">Specialisation</div>
  <!-- second column of grid: left-side fields -->
  <div class="sheet-gs7"><input type="text" name="attr_character_name" /></div>
  <div class="sheet-gs8">
    <select name="attr_faction">
      <option value="1">United Nations Space Command</option>
      <option value="2">Covenant</option>
      <option value="3">Forerunner</option>
      <option value="4">Other</option>
    </select>
  </div>
  <div class="sheet-gs9"><input type="text" name="attr_soldier_type" /></div>
  <div class="sheet-gs10"><input type="text" name="attr_rank" /></div>
  <div class="sheet-gs11"><input type="text" name="attr_size" placeholder="Average" /></div>
  <div class="sheet-gs12"><input type="text" name="attr_specialisation" /></div>
  <!-- third column of grid: header logo -->
  <div class="sheet-gs13">
    <input type="checkbox" name="attr_faction" value="1" class="sheet-imghidden sheet-imghider" checked>
    <div class="UNSC"><img name="logo" src="https://cdn.discordapp.com/attachments/676016722939084800/679967143206453373/faction_logo_UNSC.png" height="130" width="130"/></div>
    <input type="checkbox" name="attr_faction" value="2" class="sheet-imghidden sheet-imghider">
    <div class="COVENANT"><img name="logo" src="https://cdn.discordapp.com/attachments/676016722939084800/679967137908916284/faction_logo_Covenant.png" height="130" width="130"/></div>
    <input type="checkbox" name="attr_faction" value="3" class="sheet-imghidden sheet-imghider">
    <div class="FORERUNNER"><img name="logo" src="https://cdn.discordapp.com/attachments/676016722939084800/679967140358389761/faction_logo_Forerunner.png" height="130" width="130"/></div>
    <input type="checkbox" name="attr_faction" value="4" class="sheet-imghidden sheet-imghider">
    <div class="OTHER"><img name="logo" src="https://cdn.discordapp.com/attachments/676016722939084800/679967139285041172/mythic_logo.png" height="130" width="130"/></div>
  </div>
  <!-- REPLACE LOGO SOURCE ONCE COMPLETE: src="images/mythic_logo.png" -->
  <!-- fourth column of grid: right-side fields -->
  <div class="sheet-gs14"><input type="text" name="attr_player_name" /></div>
  <div class="sheet-gs15"><input type="text" name="attr_sex" /></div>
  <div class="sheet-gs16"><input type="text" name="attr_race" /></div>
  <div class="sheet-gs17"><input type="text" name="attr_upbringing" /></div>
  <div class="sheet-gs18"><input type="text" name="attr_environment" /></div>
  <div class="sheet-gs19"><input type="text" name="attr_lifestyle" /></div>
  <!-- fifth column of grid: right-side fields' labels/names -->
  <div class="sheet-gs20">Player Name</div>
  <div class="sheet-gs21">Gender</div>
  <div class="sheet-gs22">Race</div>
  <div class="sheet-gs23">Upbringing</div>
  <div class="sheet-gs24">Environment</div>
  <div class="sheet-gs25">Lifestyle</div>

</div>
<br>

<script type="text/javascript">
    // TODO: SET THE PROPER URLS TO THE IMAGES HERE
    const factions = {
        "": "https://i.postimg.cc/xjBZN4Hy/mythic-logo.png",
        "United Nations Space Command": "https://i.postimg.cc/3JNpqVCM/faction-logo-UNSC.png",
        "Covenant": "",
        "Forerunner": "",
        "Specific": ""
    }
    const selects = document.getElementsByName("attr_faction");
    for (let select of selects) {
        select.addEventListener("change", function (e) {
            if (factions[e.target.value]) {
                const logoEl = e.target.parentNode.parentNode.getElementsByTagName("img").logo;
                if (logoEl) logoEl.src = factions[e.target.value];
            }
        });
    }
</script>

<!-- SHEET WORKER FOR FACTION DROPDOWN -->
<script type="text/worker">
  console.log("Sheet worker initiated");
  on("change:faction", function() {
    console.log("Change event triggered");
    getAttrs(["faction"], function(obj) {
	  let Beter = obj.faction;
// Make a map for your different hyperlinks dummy!
	  let logo_human = "https://i.postimg.cc/3JNpqVCM/faction-logo-UNSC.png"
      if (Beter == "United Nations Space Command") setAttrs({ logo.src: logo_human });
	});
  });
</script>

<!-- ______________________________ characteristics grid ______________________________ -->

<div class="sheet-characteristics">

  <div>
    <div class="sheet-characteristics_box"><button name="STR" type="roll" value="/me rolls strength with [[floor(([[@{STR} + @{STR_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>STR</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_STR" /></div>
    <div class="sheet-characteristics_box"><select name="attr_STR_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="TOU" type="roll" value="/me rolls toughness with [[floor(([[@{TOU} + @{TOU_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>TOU</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_TOU" /></div>
    <div class="sheet-characteristics_box"><select name="attr_TOU_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Interm. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="AGI" type="roll" value="/me rolls agility with [[floor(([[@{AGI} + @{AGI_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>AGI</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_AGI" /></div>
    <div class="sheet-characteristics_box"><select name="attr_AGI_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="WFR" type="roll" value="/me rolls warfare ranged with [[floor(([[@{WFR} + @{WFR_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>WFR</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_WFR" /></div>
    <div class="sheet-characteristics_box"><select name="attr_WFR_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="WFM" type="roll" value="/me rolls warfare melee with [[floor(([[@{WFM} + @{WFM_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>WFM</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_WFM" /></div>
    <div class="sheet-characteristics_box"><select name="attr_WFM_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="INT" type="roll" value="/me rolls intellect [[floor(([[@{INT} + @{INT_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>INT</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_INT" /></div>
    <div class="sheet-characteristics_box"><select name="attr_INT_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="PER" type="roll" value="/me rolls perception with [[floor(([[@{PER} + @{PER_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>PER</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_PER" /></div>
    <div class="sheet-characteristics_box"><select name="attr_PER_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="CR" type="roll" value="/me rolls courage with [[floor(([[@{CR} + @{CR_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>CR</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_CR" /></div>
    <div class="sheet-characteristics_box"><select name="attr_CR_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="CH" type="roll" value="/me rolls charisma with [[floor(([[@{CH} + @{CH_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>CH</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_CH" /></div>
    <div class="sheet-characteristics_box"><select name="attr_CH_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="LD" type="roll" value="/me rolls leadership with [[floor(([[@{LD} + @{LD_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>LD</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_LD" /></div>
    <div class="sheet-characteristics_box"><select name="attr_LD_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

</div>
<br>



<!-- ______________________________ mythic characteristics, movement and pushing grid ______________________________ -->

<div class="sheet-characteristics_mythic_movement_carry">

  <div class="sheet-characteristics2_mythic">
    <div class="sheet-mythicgs1 ">Mythic Characteristics</div>
    <div class="sheet-mythicgs2 "><input type="number" value="0" name="attr_STR_mythic" /></div>
    <div class="sheet-mythicgs3 "><input type="number" value="0" name="attr_TOU_mythic" /></div>
    <div class="sheet-mythicgs4 "><input type="number" value="0" name="attr_AGI_mythic" /></div>
    <div class="sheet-mythicgs5 ">Strength</div>
    <div class="sheet-mythicgs6 ">Toughness</div>
    <div class="sheet-mythicgs7 ">Agility</div>
  </div>

  <div class="sheet-characteristics2_movement">
    <div class="sheet-movementgs1 ">Character Movement</div>
    <div class="sheet-movementgs2 "><input type="number" name="attr_half_move" /></div>
    <div class="sheet-movementgs3 "><input type="number" name="attr_full_move" /></div>
    <div class="sheet-movementgs4 "><input type="number" name="attr_charge_move" /></div>
    <div class="sheet-movementgs5 "><input type="number" name="attr_run_move" /></div>
    <div class="sheet-movementgs6 "><input type="number" name="attr_sprint_move" /></div>
    <div class="sheet-movementgs7 "><input type="number" name="attr_jump_move" /></div>
    <div class="sheet-movementgs8 "><input type="number" name="attr_leap_move" /></div>
    <div class="sheet-movementgs9 ">Half Move</div>
    <div class="sheet-movementgs10 ">Full Move</div>
    <div class="sheet-movementgs11 ">Charge</div>
    <div class="sheet-movementgs12 ">Run</div>
    <div class="sheet-movementgs13 ">Sprint</div>
    <div class="sheet-movementgs14 ">Jump</div>
    <div class="sheet-movementgs15 ">Leap</div>
  </div>

  <div class="sheet-characteristics2_carry">
    <div class="sheet-carrygs1 ">Carrying Capacity</div>
    <div class="sheet-carrygs2 "><input type="number" name="attr_carry" /></div>
    <div class="sheet-carrygs3 "><input type="number" name="attr_lift" /></div>
    <div class="sheet-carrygs4 "><input type="number" name="attr_push" /></div>
    <div class="sheet-carrygs5 ">Carry</div>
    <div class="sheet-carrygs6 ">Lift</div>
    <div class="sheet-carrygs7 ">Push</div>
  </div>

</div>



<!-- ______________________________ initiative/sheet tabs grid ______________________________ -->

<div class="sheet-initiative_tabs_main">
  <div class="sheet-initiative_tabs_initiative">
    <div class="sheet-initiative_tabs_boxes"><button name="initiative" type="roll" value="/me rolls initiative with [[@{initmod0}(@{initmod1}+@{initmod2}+@{initmod3})&{tracker}]]"<span>Initiative</span></button></div>
    <div style="display:none;"><input name="attr_initmod0" value="floor"/></div>
    <div class="sheet-initiative_tabs_boxes"><select name="attr_initmod1">
      <option value="1d10"selected="selected">Standard</option>
      <option value="2d10k1">Fast Foot</option>
      <option value="?{dice|1d10}">Custom</option>
    </select></div>
    <div class="sheet-initiative_tabs_boxes">+</div>
    <div class="sheet-initiative_tabs_boxes"><input type="number" name="attr_initmod2" value="0"/></div>
    <div class="sheet-initiative_tabs_boxes">+</div>
    <div class="sheet-initiative_tabs_boxes"><select name="attr_initmod3">
      <option value="(@{AGI}+@{AGI_advancement})/10+@{AGI_mythic}"selected="selected">Agility</option>
      <option value="(@{INT} + @{INT_advancement})/10">Intellect</option>
      <option value="0">N/A</option>
    </select></div>
  </div>
  <div class="sheet-initiative_tabs_tabs">
    <button type="action" name="act_core" >Core</button>
    <button type="action" name="act_equipment" >Equipment</button>
    <button type="action" name="act_medical" >Medical</button>
    <button type="action" name="act_advancements" >Advancements</button>
    <button type="action" name="act_journal" >Journal</button>
    <button type="action" name="act_vehicles" >Vehicles</button>
    <button type="action" name="act_settings" >Settings</button>
  </div>
</div>
<hr>

<!-- ______________________________ logic for the sheet tabs ___________________ -->

<input type='hidden' class='sheet-tabstoggle' name='attr_sheetTab'  value='core'  />
<script type="text/worker">
  const buttonlist = ["core","equipment","medical","advancements","journal","vehicles","settings"];
  buttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
      setAttrs({
        sheetTab: button
      });
    });
  });
</script>



<!-- ______________________________ start of minimisable infographic____________ -->

<div class="sheet-minimisable_infographic_main">
  <input type="checkbox" class="sheet-minimisable_switch">
  <div class="sheet-minimisable_infographic_a">
    a short single line containing all the important info you might need
  </div>
  <div class="sheet-minimisable_infographic_b">
    a long
    <div>list</div>
    of text<br>
    with
    a bunch<br>
    of information
  </div>
</div>



<!-- ______________________________ sheet tabs _________________________________ -->
<!-- ______________________________ start of core ______________________________ -->

<div class='sheet-core'>

  <h2>Core Data</h2>
  <div class="sheet-core_lists">
    <div class="sheet-core_lists1">
      <fieldset name="skills" class="repeating_skills">
        <input type="text" name="skill" />
      </fieldset>
    </div>
  </div>

</div>


<div class='sheet-equipment'>
  <h2>Equipment/gear</h2>
  <span>Equipment Goes here</span>
</div>
<div class='sheet-medical'>
  <h2>Medical</h2>
  <span>Sheet Medical goes here</span>
</div>

<div class='sheet-advancements'>
  <div class='sheet-advancements_experience'>
  </div>

  <div class="sheet-advancement_list">
    <div style="text-align:center;">
      Unspent XP: <input type="number" name="attr_XP_current" style="width:20%; margin-right:20px;">
	  Spent XP: <input type="number" name="attr_XP_spent" style="width:20%; margin-right:20px;">
	  XP Total: <input type="number" name="attr_XP_Total" style="width:20%;">
    </div>
    <br>


    <div>
      <input type="text" name="advancementL" placeholder="Write XP-costing item name here">
	  <input type="number" name="advancement_costL" placeholder="XP Cost" style="width:10%;">
	  <input type="number" name="advancement_pg#L" placeholder="Page #" style="width:10%; margin-right:5px;">
      <input type="checkbox" name="exp_desc" class="collapsible_experience_block_switch">
	  <div="collapsible_experience_description_window_b">Expand or collapse experience item description</div>
      <textarea name="attr_experience" class="collapsible_experience_description_window_a"></textarea>
    </div>


    <fieldset name="advancements" class="repeating_advancements">
      <input type="text" name="advancementL" placeholder="advancement">
	  <input type="number" name="advancement_costL" placeholder="cost">
	  <input type="number" name="advancement_pg#L" placeholder="pg#">
      <input type="text" name="advancementR" placeholder="advancement">
	  <input type="number" name="advancement_costR" placeholder="$">
	  <input type="number" name="advancement_pg#R" placeholder="pg#">
    </fieldset>
  </div>
</div>

<div class='sheet-journal'>
  <h2 class='sheet-journal_heading'>Journal: Objectives</h2>
  <fieldset name="objective" class="repeating_objectives">
    <input type="text" name="attr_objective" class="sheet-objectives" />
    <input type="checkbox" name="attr_objective_completed" />
  </fieldset>
  <h2 class='sheet-journal_heading'>Journal: Notes</h2>
  <fieldset name="notes" class="repeating_notes">
    <!-- insert new line html entity [&#10;] inside of placeholder attribute -->
    <textarea name="attr_notes" class="sheet-journal_notes" placeholder="&#10;Enter information such as plot details, unresolved mission details such as escaped targets, character relationships, et cetera here.&#10;
	&#10;Also feel free to write appearance details here or in Bio & Info for public viewing: age, height, weight, colors of eyes, hair, skin, and more that comes to mind.&#10;
	&#10;See Medical tab to include any medical information such as character injuries."></textarea>
  </fieldset>
</div>

<div class='sheet-vehicles'>
  <h2 class>Vehicles</h2>
  <span>Vehicles goes here</span>
</div>

<div class='sheet-settings'>
  <h2>Settings</h2>
  <span>Settings goes here</span>
</div>
